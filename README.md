# Named entity recognition (NER) with spaCy
A Python script that allows you to extract the desired piece of text from a document by label.

Test task
## Usage
Install all packages:
```
pip install -r requirements.txt
```
```
usage: model.py [-h] [-p] [-f] [-it ITER] [-d DROP] [-e] [-i path] [-o path]
                [-r] [-v]

NER

optional arguments:
  -h, --help            show this help message and exit
  -p, --predict         use it for prediction from a text input
  -f, --fit             use it for training model
  -it ITER, --iter ITER
                        Number of iterations during training
  -d DROP, --drop DROP  Dropout rate
  -e, --evaluate        use it to evaluate model performance
  -i path, --input path
                        path to file in json with input data for fit / predict
                        / evaluate
  -o path, --out path   path to output in predictions.json
  -r, --rollback        return the model to its original state
  -v, --verbose         verbose output

Example: !python model.py -f -i ./example_data/train.json -it 2 -drop 0.2
```
## Format
**For prediction:**

```
"id": 311837655,
"text": "Извещение о проведении электронного аукциона для закупки №0124200000622005291 Общая информация Номер извещения 0124200000622005291 Наименование объекта закупки Поставка медицинской мебели Предметом контракта является поставка товара, необходимого для нормального жизнеобеспечения в случаях, ка за счет собственных средств организации Да Финансовое обеспечение закупки Всего: Оплата за 2022 год Оплата за 2023 год Оплата за 2024 год Сумма на последующие годы 541976.34 541976.34 0.00 0.00 0.00 Этапы исполнения контракта Контракт не разделен на этапы исполнения контракта Финансирование за счет собственных средств Итого Сумма контракта (в валюте контракта) на 2022 год на 2023 год на 2024 год на 2025 год 1 2 3 4 541976.34 0 0 0 541976.34 0.00 0.00 0.00 Код видов расходов Сумма контракта (в валюте контракта) на 2022 год на 2023 год на 2024 год на 2025 год 1 2 3 4 5 244 541976.34 0 0 0 Итого 541976.34 0.00 0.00 0.00 Место поставки товара, выполнения работы или оказания услуги 163002, г. Архангельск, пр. Обводный канал, д.7, помещения Заказчика Предусмотрена возможность одностороннего отказа от исполнения контракта в соответствии со ст. 95 Закона № 44-ФЗ Да Обеспечение заявки Обеспечение заявок не требуется Обеспечение исполнения контракта Требуется обеспечение исполнения контракта Размер обеспечения исполнения контракта 10.00% Порядок обеспечения исполнения контракта, требования к обеспечению В соответствии с приложением к извещению об осуществлении закупки Платежные реквизиты \"Номер расчётного счёта\" 03224643110000002400 \"Номер лицевого счёта\" 20246Ц24120 \"БИК\" 011117401 \"Наименование кредитной организации\" ОТДЕЛЕНИЕ АРХАНГЕЛЬСК БАНКА РОССИИ//УФК по Архангельской области и Ненецкому автономному округу г. Архангельск \"Номер корреспондентского счета\" 40102810045370000016 Требования к гарантии качества товара, работы, услуги Требуется гарантия качества товара, работы, услуги Да Информация о требованиях к гарантийному обслуживанию товара в соответствии с проектом контракта Требования к гарантии производителя товара в соответствии с проектом контракта Срок, на который предоставляется гарантия в соответствии с проектом контракта Обеспечение гарантийных обязательств Обеспечение гарантийных обязательств не требуется Информация о банковском и (или) казначейском сопровождении контракта Банковское или казначейское со Извещение о проведении электронного аукциона для закупки №0124200000622005291 Общая информация Номер извещения 0124200000622005291 Наименование объекта закупки Поставка медицинской мебели Предметом контракта является поставка товара, необходимого для нормального жизнеобеспечения в случаях,",
"label": "обеспечение исполнения контракта"
```

**For fit:**
```
"id": 532018912,
"text": "Извещение о проведении электронного аукциона Общая информация Номер извещения Наименование объекта закупки Ремонт муниципальной квартиры по адресу: п. Анатольская, ул. Привокзальная, д. 33 кв. 6 Способ определения поставщика (подрядчика, исполнителя) 00020300243 467850 0 0 0 Итого 467850.00 0.00 0.00 0.00 Место поставки товара, выполнения работы или оказания услуги Российская Федерация, Свердловская обл, Горноуральский городской округ поселок Анатольская улица Привокзальная д. 33 кв. 6 Предусмотрена возможность одностороннего отказа от исполнения контракта в соответствии со ст. 95 Закона № 44-ФЗ Да Обеспечение заявки Требуется обеспечение заявки Размер обеспечения заявки 4678.50 Российский рубль Порядок внесения денежных средств в качестве обеспечения заявки на участие в закупке, а также условия гарантии Установлен п.п. 11,12 III Описание объекта закупки Реквизиты счета в соответствии с п.16 ч. 1 ст. 42 Закона № 44-ФЗ \"Номер расчётного счёта\" 03232643657170006200 \"Номер лицевого счёта\" 05623039960 \"БИК\" 016577551 \"Наименование кредитной организации\" УРАЛЬСКОЕ ГУ БАНКА РОССИИ//УФК по Свердловской области \"Номер корреспондентского счета\" 40102810645370000054 Обеспечение исполнения контракта Требуется обеспечение исполнения контракта Размер обеспечения исполнения контракта 10.00% Порядок обеспечения исполнения контракта, требования к обеспечению Установлен п. 15 III Описание объекта закупки Платежные реквизиты \"Номер расчётного счёта\" 03232643657170006200 \"Номер лицевого счёта\" 05623039960 \"БИК\" 016577551 \"Наименование кредитной организации\" УРАЛЬСКОЕ ГУ БАНКА РОССИИ//УФК по Свердловской области \"Номер корреспондентского счета\" 40102810645370000054 Требования к гарантии качества товара, работы, услуги Требуется гарантия качества товара, работы, услуги Нет Обеспечение гарантийных обязательств Обеспечение гарантийных обязательств не требуется Информация о банковском и (или) казначейском сопровождении контракта Банковское или казначейское сопровождение контракта не требуется Дополнительная информация Информация отсутствует Объект закупки Российский рубльТип объекта закупки Работа Наименование товара, работы, услуги по ОКПД2, КТРУ Код позиции Характеристики товара, работы, услуги Заказчик Единица измерения Количество(объем работы, услуги) Цена за единицу измерения Извещение о проведении электронного аукциона Общая информация Номер извещения Наименование объекта закупки Ремонт муниципальной квартиры по адресу: п. Анатольская, ул. Привокзальная, д. 33 кв. 6 Способ определения поставщика (подрядчика, исполнителя)",
"label": "обеспечение исполнения контракта",
"extracted_part": {
  "text": [
    "Размер обеспечения исполнения контракта 10.00%"
  ],
  "answer_start": [
    1251
  ],
  "answer_end": [
    1297
  ]
}
```

**Similar format for evaluation as in fit.**
## Training and examples
To see how the model was trained, see `research.ipynb` jupiter notebook.<br />
To see how to use the model, see `usage.ipynb` jupiter notebook.<br />
See also the sample data in [examples_data](example_data).

### The overall result of the work is `predictions.json` in [predictions](final_predictions)
## Sources
- https://spacy.io/